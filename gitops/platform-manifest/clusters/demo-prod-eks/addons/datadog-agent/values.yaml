datadog:
  clusterName: demo-prod-eks

  clusterChecks:
    enabled: true

  kubelet:
    useApiServer: true # API 서버를 통해 pod 목록 조회
    tlsVerify: false

  tags:
    - "env:prod"
    - "cluster:demo-prod-eks"

  env:
    # hostname을 노드명으로 설정
    - name: DD_HOSTNAME
      valueFrom:
        fieldRef:
          fieldPath: spec.nodeName
    - name: DD_APM_IGNORE_RESOURCES
      value: "GET /health-check"

  secretBackend:
    command: "/readsecret_multiple_providers.sh"

clusterChecksRunner:
  enabled: true
  resources:
    requests:
      cpu: 1566m
      memory: 4210Mi
    limits:
      memory: 4210Mi

clusterAgent:
  image:
    tag: 7.68.0
  resources:
    requests:
      cpu: 429m
      memory: 806Mi
    limits:
      memory: 806Mi

  confd:
    # kube-metrics-server 설정
    kube_metrics_server.yaml: |-
      advanced_ad_identifiers:
        - kube_endpoints:
            name: "metrics-server"
            namespace: "kube-system"
      cluster_check: true
      init_config: {}
      instances:
        - prometheus_url: "https://%%host%%:%%port%%/metrics"
          bearer_token_auth: true
          tls_verify: false
          timeout: 10
    postgres.yaml: |-
      cluster_check: true
      init_config:
      instances:
        - dbm: true
          host: 'prod-airflow-0.c3epvhkyjnng.ap-northeast-2.rds.amazonaws.com'
          port: 5432
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password]
          tags:
            - 'env:prod'
            - 'dbinstanceidentifier:prod-airflow-0'
            - 'cluster_name:prod-airflow'
        - dbm: true
          host: 'prod-airflow-1.c3epvhkyjnng.ap-northeast-2.rds.amazonaws.com'
          port: 5432
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password]
          tags:
            - 'env:prod'
            - 'dbinstanceidentifier:prod-airflow-1'
            - 'cluster_name:prod-airflow'

        - dbm: true
          host: 'prod-item-1.c3epvhkyjnng.ap-northeast-2.rds.amazonaws.com'
          port: 5432
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password]
          tags:
            - 'env:prod'
            - 'dbinstanceidentifier:prod-item-1'
            - 'cluster_name:prod-item'
        - dbm: true
          host: 'prod-item-2.c3epvhkyjnng.ap-northeast-2.rds.amazonaws.com'
          port: 5432
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password]
          tags:
            - 'env:prod'
            - 'dbinstanceidentifier:prod-item-2'
            - 'cluster_name:prod-item'
        - dbm: true
          host: 'prod-item-3.c3epvhkyjnng.ap-northeast-2.rds.amazonaws.com'
          port: 5432
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password]
          tags:
            - 'env:prod'
            - 'dbinstanceidentifier:prod-item-3'
            - 'cluster_name:prod-item'

    # self-hosted mongoDB 설정
    ##   - For a replica set, specify the hostname of a mongod instance as listed in
    ##     the replica set configuration. You need one check instance per mongod instance
    ##     in order to collect replication metrics and events.
    mongo.yaml: |-
      cluster_check: true
      init_config:
      instances:     
        - hosts:
            - prod-user-shard01-03.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-user
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-user-shard01-04.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-user
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-user-shard01-05.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-user
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*

        - hosts:
            - prod-seller-shard01-04.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-seller
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-seller-shard01-06.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-seller
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-seller-shard01-07.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-seller
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*

        - hosts:
            - prod-cluster0-shard01-05.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-cluster0
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-cluster0-shard01-06.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-cluster0
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-cluster0-shard01-07.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-cluster0
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-cluster0-shard01-08.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-cluster0
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*

        - hosts:
            - prod-incubator-shard01-04.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-incubator
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-incubator-shard01-05.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-incubator
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-incubator-shard01-06.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-incubator
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*

        - hosts:
            - prod-alfarm-shard01-06.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-alfarm
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-alfarm-shard01-07.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-alfarm
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-alfarm-shard01-08.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-alfarm
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-alfarm-shard01-09.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-alfarm
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*

        - hosts:
            - prod-item-shard01-04.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-item
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-item-shard01-05.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-item
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-item-shard01-06.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-item
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*

        - hosts:
            - prod-almart-shard01-04.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-almart
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-almart-shard01-05.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-almart
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-almart-shard01-06.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-almart
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*

        - hosts:
            - prod-altoon-shard01-04.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-altoon
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-altoon-shard01-05.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-altoon
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-altoon-shard01-06.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-altoon
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*

        - hosts:
            - prod-sku-catalog-shard01-03.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-sku-catalog
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-sku-catalog-shard01-04.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-sku-catalog
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-sku-catalog-shard01-05.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-sku-catalog
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*

        - hosts:
            - prod-checkin-shard01-04.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-checkin
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-checkin-shard01-05.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-checkin
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-checkin-shard01-06.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-checkin
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*

        - hosts:
            - prod-external-shard01-03.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-external
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-external-shard01-04.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-external
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-external-shard01-05.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-external
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*

        - hosts:
            - prod-shorts-shard01-04.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-shorts
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-shorts-shard01-05.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-shorts
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-shorts-shard01-06.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-shorts
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*

        - hosts:
            - prod-log-shard01-03.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-log
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-log-shard01-04.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-log
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-log-shard01-05.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-log
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*

        - hosts:
            - prod-crm-shard01-04.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-crm
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-crm-shard01-05.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-crm
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-crm-shard01-06.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-crm
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*

        - hosts:
            - prod-recommendation-shard01-04.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-recommendation
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-recommendation-shard01-05.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-recommendation
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-recommendation-shard01-06.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-recommendation
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*

        - hosts:
            - prod-pay-shard01-04.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-pay
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-pay-shard01-05.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-pay
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-pay-shard01-06.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-pay
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*

        - hosts:
            - prod-allulu-log-shard01-03.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-allulu-log
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-allulu-log-shard01-04.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-allulu-log
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-allulu-log-shard01-05.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-allulu-log
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*

        - hosts:
            - prod-alfarm-log-shard01-04.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-alfarm-log
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-alfarm-log-shard01-05.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-alfarm-log
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-alfarm-log-shard01-06.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-alfarm-log
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*

        - hosts:
            - prod-alfarm-micro-shard01-06.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-alfarm-micro
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-alfarm-micro-shard01-07.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-alfarm-micro
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-alfarm-micro-shard01-08.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-alfarm-micro
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*

        - hosts:
            - prod-alfarm-v2-shard01-04.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-alfarm-v2
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-alfarm-v2-shard01-05.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-alfarm-v2
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*
        - hosts:
            - prod-alfarm-v2-shard01-06.db.prod.iexample-org.com:27017
          username: datadog
          password: ENC[k8s_secret@datadog/datadog-secret/mongodb-datadog-password] 
          options:
            authSource: admin
          tls: false
          dbm: true
          cluster_name: prod-alfarm-v2
          additional_metrics: ["metrics.commands", "tcmalloc", "top", "collection"]
          collections_indexes_stats: true
          database_autodiscovery:
            enabled: true
          exclude:
            - admin.*
            - config.*

agents:
  image:
    tag: 7.68.0
  containers:
    agent:
      resources:
        requests:
          cpu: 1010m
          memory: 599Mi
        limits:
          memory: 599Mi
    traceAgent:
      resources:
        requests:
          cpu: 827m
          memory: 394Mi
        limits:
          memory: 394Mi
    processAgent:
      resources:
        requests:
          cpu: 60m
          memory: 270Mi
        limits:
          memory: 270Mi
    systemProbe:
      resources:
        requests:
          cpu: 350m
          memory: 617Mi
        limits:
          memory: 617Mi

  tolerations:
    - operator: Equal
      key: DemoServicesOnly
      value: "true"
      effect: NoSchedule
    - operator: Equal
      key: AirportOnly
      value: "true"
      effect: NoSchedule
    - operator: Equal
      key: DemoAdsOnly
      value: "true"
      effect: NoSchedule
    - operator: Equal
      key: DemoFarmV1Only
      value: "true"
      effect: NoSchedule
    - operator: Equal
      key: DemoFarmV2Only
      value: "true"
      effect: NoSchedule
    - operator: Equal
      key: DemoAltoonOnly
      value: "true"
      effect: NoSchedule
    - operator: Equal
      key: DemoAlwalkOnly
      value: "true"
      effect: NoSchedule
    - operator: Equal
      key: DemoBackOnly
      value: "true"
      effect: NoSchedule
    - operator: Equal
      key: DemoBffOnly
      value: "true"
      effect: NoSchedule
    - operator: Equal
      key: DemoCoreOnly
      value: "true"
      effect: NoSchedule
    - operator: Equal
      key: DemoShortDramaOnly
      value: "true"
      effect: NoSchedule
    - operator: Equal
      key: DemoJobsOnly
      value: "true"
      effect: NoSchedule
    - operator: Equal
      key: DemoQualityOnly
      value: "true"
      effect: NoSchedule
    - operator: Equal
      key: DemoRecoOnly
      value: "true"
      effect: NoSchedule
    - operator: Equal
      key: DemoScrapersOnly
      value: "true"
      effect: NoSchedule
    - operator: Equal
      key: DemoSellerOnly
      value: "true"
      effect: NoSchedule
    - operator: Equal
      key: CommercePlatformOnly
      value: "true"
      effect: NoSchedule
    - operator: Equal
      key: DemoCoreOnly
      value: "true"
      effect: NoSchedule
    - operator: Equal
      key: DemoPriceOnly
      value: "true"
      effect: NoSchedule
    - operator: Equal
      key: ShopinOnly
      value: "true"
      effect: NoSchedule
    - operator: Equal
      key: DemoShortsOnly
      value: "true"
      effect: NoSchedule
    # - operator: Equal
    #   key: CoreAddonsOnly
    #   value: "true"
    #   effect: NoSchedule
    - operator: Equal
      key: CommonAddonsOnly
      value: "true"
      effect: NoSchedule
